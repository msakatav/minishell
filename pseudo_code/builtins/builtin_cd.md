# builtin_cd.c 疑似コード

## 関数: update_pwd
- **概要**:
  - ディレクトリ移動後に `PWD` と `OLDPWD` 環境変数を更新する。
- **引数**:
  - `data`: シェルの主要データ構造体
  - `old_pwd`: 移動前のディレクトリパス
- **処理**:
  1. `getcwd` で現在の作業ディレクトリを取得する。
  2. 取得に成功した場合:
     - 環境変数 `OLDPWD` を `old_pwd` に更新する。
     - 環境変数 `PWD` を現在の作業ディレクトリに更新する。

## 関数: get_cd_path
- **概要**:
  - `cd` コマンドの引数から移動先パスを決定する。
- **引数**:
  - `args`: コマンド引数の配列
  - `data`: シェルの主要データ構造体
- **戻り値**:
  - 移動先パス、またはエラー時 `NULL`
- **処理**:
  1. 引数がない場合 (`!args[1]`):
     - 環境変数 `HOME` の値を取得する。
     - `HOME` が設定されていない場合、エラーメッセージを出力して `NULL` を返す。
  2. 引数が `-` の場合:
     - 環境変数 `OLDPWD` の値を取得する。
     - `OLDPWD` が設定されていない場合、エラーメッセージを出力して `NULL` を返す。
     - パスを標準出力に出力する。
  3. それ以外の場合:
     - `args[1]` をパスとする。
  4. パスを返す。

## 関数: builtin_cd
- **概要**:
  - カレントディレクトリを変更する。
- **引数**:
  - `args`: コマンド引数の配列
  - `data`: シェルの主要データ構造体
- **処理**:
  1. `getcwd` で現在の作業ディレクトリを取得し、`old_pwd` に保存する。
     - 失敗した場合は `1` を返す。
  2. 引数が2つ以上ある場合 (`args[1]` と `args[2]` が存在):
     - エラーメッセージ "too many arguments" を出力する。
     - `1` を返す。
  3. `get_cd_path` を呼び出し、移動先パスを取得する。
     - 取得に失敗した場合 (`NULL`)、`1` を返す。
  4. `chdir` でディレクトリを移動する。
     - 失敗した場合:
       - エラーメッセージを出力する。
       - `1` を返す。
  5. `update_pwd(data, old_pwd)` を呼び出し、環境変数を更新する。
  6. `0` を返す。
