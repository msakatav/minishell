# builtin_export.c 疑似コード

## 関数: print_export
- **引数**:
  - `env`: 環境変数のリスト
- **処理**:
  1. 環境変数リスト `env` を走査するループ:
     - `declare -x key="value"` の形式で標準出力に出力する。
     - 次のノードへ進む。

## 関数: is_valid_identifier
- **引数**:
  - `str`: 識別子としてチェックする文字列
- **処理**:
  1. 文字列が `NULL` または空の場合、`0` を返す。
  2. 先頭文字が英字またはアンダースコア `_` でない場合、`0` を返す。
  3. 2文字目以降、`=` が現れるまでループする:
     - 英数字またはアンダースコア `_` でない場合、`0` を返す。
  4. 有効な識別子であれば `1` を返す。

## 関数: builtin_export
- **引数**:
  - `args`: コマンド引数の配列
  - `data`: シェルの主要データ構造体
- **処理**:
  1. 引数がない場合 (`!args[1]`):
     - `print_export(data->env)` を呼び出し、現在の環境変数を一覧表示する。
     - `0` を返す。
  2. 引数を順に処理するループ (`i = 1` から):
     - 引数が有効な識別子でない場合 (`!is_valid_identifier`):
       - エラーメッセージ "not a valid identifier" を出力する。
       - `1` を返す。
     - 引数に `=` が含まれる場合:
       - `=` の位置を特定する。
       - キー (`key`) を `=` の前までの部分文字列として抽出する。
       - 値 (`value`) を `=` の後の部分文字列として複製する。
       - `set_env_value` を呼び出し、環境変数を設定または更新する。
       - `key` と `value` のメモリを解放する。
     - 次の引数へ進む。
  3. `0` を返す。
