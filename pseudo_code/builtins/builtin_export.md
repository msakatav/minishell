# builtin_export.c 疑似コード

## 関数: print_export
- **引数**:
  - `env`: 環境変数リスト
- **処理**:
  1. 環境変数リストを走査し、`declare -x key="value"` の形式で出力する。

## 関数: is_valid_char
- **引数**:
  - `c`: 文字
- **処理**:
  1. 文字が英数字またはアンダースコアであれば真を返す。

## 関数: is_valid_identifier
- **引数**:
  - `str`: 識別子文字列
- **処理**:
  1. 文字列が空、または最初の文字が英字・アンダースコアでなければ偽を返す。
  2. 2文字目以降について、`=` が出るまでループ:
     - `is_valid_char` で文字をチェックし、無効なら偽を返す。
  3. すべて有効なら真を返す。

## 関数: process_export_arg
- **引数**:
  - `arg`: 引数文字列
  - `data`: シェルの主要データ構造体
- **処理**:
  1. 引数内の `=` の位置を探す。
  2. `=` が見つかった場合:
     - キーと値を抽出する。
     - `set_env_value` で環境変数を設定する。
     - メモリを解放する。

## 関数: builtin_export
- **引数**:
  - `args`: 引数配列
  - `data`: シェルの主要データ構造体
- **処理**:
  1. 引数がない場合、`print_export` を呼び出して一覧を表示し、終了する。
  2. 引数を走査するループ:
     - `is_valid_identifier` で識別子の妥当性をチェックする。
     - 無効な場合、エラーを出力し、戻り値を `1` に設定する。
     - 有効な場合、`process_export_arg` を呼び出して環境変数を設定する。
  3. 戻り値を返す。

