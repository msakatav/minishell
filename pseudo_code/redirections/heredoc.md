# heredoc.c 疑似コード

## 関数: get_heredoc_filename
- **引数**: なし
- **処理**:
  1. 静的変数 `i` を使用して、一意の番号を生成する。
  2. `/tmp/.heredoc_` と番号を結合してファイル名を作成する。
  3. 作成したファイル名を返す。

## 関数: read_heredoc_lines
- **引数**:
  - `fd`: 書き込み先のファイルディスクリプタ
  - `delimiter`: 終了判定用のデリミタ
- **処理**:
  1. 無限ループ:
     - `readline` でプロンプト `> ` を表示し、入力を読み取る。
     - 入力が `NULL` またはデリミタと一致する場合、ループを終了する。
     - 入力行をファイルに書き込む。
     - メモリを解放する。

## 関数: handle_heredoc
- **引数**:
  - `delimiter`: ヒアドキュメントの終了識別子
- **処理**:
  1. `get_heredoc_filename` で一時ファイル名を取得する。
  2. ファイルを書き込みモード (`O_WRONLY | O_CREAT | O_TRUNC`) で開く。
     - 失敗した場合、ファイル名を解放して `-1` を返す。
  3. `read_heredoc_lines` を呼び出し、入力を読み取ってファイルに書き込む。
  4. ファイルディスクリプタを閉じる。
  5. ファイルを読み込みモード (`O_RDONLY`) で開き直す。
  6. `unlink` でファイルを削除する（プロセス終了時に自動的に消えるようにする）。
  7. ファイル名を解放する。
  8. ファイルディスクリプタを返す。
